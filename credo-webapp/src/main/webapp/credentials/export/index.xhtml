<!DOCTYPE html [
    <!ENTITY nbsp "&#160;"> 
]>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:body>
	<ui:composition template="/templates/masterTemplate.xhtml">
		<f:metadata>
			<f:viewParam id="id" name="id" value="#{exportCredentialBean.id}" 
			  required="true" requiredMessage="#{messages.credentialIdIsRequired}"/>
			<f:viewAction action="#{exportCredentialBean.createExportRequest}" />
		</f:metadata>
		<ui:define name="windowTitle">
		  #{messages.applicationName}::#{messages.exportCredentialSubtitle}
		</ui:define>
		<ui:define name="content">
			<div class="col-md-8">
				<h1>#{messages.exportCredentialSubtitle}</h1>
				<p>#{messages.exportCredentialDetail}</p>
				<h:form id="export" prependId="false" styleClass="form-horizontal">
          <ui:include src="/templates/messages.xhtml"/>
					<div class="form-group">
						<h:outputLabel styleClass="col-md-4 control-label">
              #{messages.credentialNameLabel}
            </h:outputLabel>
						<p class="form-control-static col-md-8"
							title="#{messages.credentialSubjectTip}">
							#{exportCredentialBean.name}</p>
					</div>
					<div class="form-group">
						<h:outputLabel styleClass="col-md-4 control-label">
              #{messages.credentialIssuerLabel}
            </h:outputLabel>
						<p class="form-control-static col-md-8"
							title="#{messages.credentialIssuerTip}">
							#{exportCredentialBean.issuer}</p>
					</div>
					<div class="form-group">
						<h:outputLabel styleClass="col-md-4 control-label">
              #{messages.credentialExpiresLabel}
            </h:outputLabel>
						<p class="form-control-static col-md-8"
							title="#{messages.credentialExpiresTip}">
							<h:outputText value="#{exportCredentialBean.expiration}" />
						</p>
					</div>
          <div class="form-group">
            <h:outputLabel styleClass="col-md-4 control-label" 
              for="fileName">#{messages.exportFileNameLabel}</h:outputLabel>
            <div class="col-md-8">
              <h:inputText required="true" 
                requiredMessage="#{messages.exportFileNameRequired}" 
                styleClass="form-control" id="fileName" 
                title="#{messages.exportFileNameTip}" 
                value="#{exportCredentialBean.fileName}"/>
            </div>
          </div>
          <div class="form-group">
            <h:outputLabel styleClass="col-md-4 control-label" 
              for="exportPassphrase">#{messages.exportPassphraseLabel}</h:outputLabel>
            <div class="col-md-4">
              <h:inputSecret
                styleClass="form-control" id="exportPassphrase" 
                title="#{messages.exportPassphraseTip}" 
                value="#{exportCredentialBean.exportPassphrase}"/>
            </div>
          </div>
          <div class="form-group has-feedback">
            <h:outputLabel styleClass="col-md-4 control-label" 
              for="exportPassphraseAgain">#{messages.exportPassphraseAgainLabel}</h:outputLabel>
            <div class="col-md-4">
              <h:inputSecret
                styleClass="form-control" id="exportPassphraseAgain" 
                title="#{messages.exportPassphraseAgainTip}" 
                value="#{exportCredentialBean.exportPassphraseAgain}">
                <f:attribute name="password" value="exportPassphrase"/>
                <f:validator validatorId="org.soulwing.credo.validators.Password"/>
              </h:inputSecret>
              <span class="form-control-feedback"></span>
            </div>
          </div>
					<div class="form-group">
						<div class="col-md-8 col-md-push-4">
							<h:commandButton styleClass="btn" value="#{messages.cancelLabel}"
								action="#{exportCredentialBean.cancel}" immediate="true" />
							&nbsp;
							<h:commandButton styleClass="btn btn-primary"
								value="#{messages.exportButtonLabel}"
								action="password" />
						</div>
					</div>
				</h:form>
			</div>
		</ui:define>
    <ui:define name="scripts">
      <h:outputScript library="js" name="credentials/export/index.js"/>
    </ui:define>
	</ui:composition>
</h:body>

</html>