<!DOCTYPE html [
    <!ENTITY nbsp "&#160;"> 
]>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:body>
	<ui:composition template="/templates/masterTemplate.xhtml">
		<ui:define name="windowTitle">
		  #{messages.applicationName}::#{messages.importCredentialSubtitle}
		</ui:define>
		<ui:define name="content">
		  <div class="col-md-8">
	      <h1>#{messages.importCredentialSubtitle}</h1>
	      <p>#{messages.importCredentialDetailsDetail}</p>
			  <h:form id="details" styleClass="form-horizontal">
			    <ui:include src="/templates/messages.xhtml"/>
          <div class="form-group">
            <h:outputLabel styleClass="col-md-4 control-label">
              #{messages.credentialSubjectLabel}
            </h:outputLabel>
            <p class="form-control-static col-md-8" 
              title="#{messages.credentialSubjectTip}">
              #{importCredentialBean.preparation.details.subject}
            </p>
          </div>
          <div class="form-group">
            <h:outputLabel styleClass="col-md-4 control-label">
              #{messages.credentialIssuerLabel}
            </h:outputLabel>
            <p class="form-control-static col-md-8"
              title="#{messages.credentialIssuerTip}">
              #{importCredentialBean.preparation.details.issuer}
            </p>
          </div>
          <div class="form-group">
            <h:outputLabel styleClass="col-md-4 control-label">
              #{messages.credentialExpiresLabel}
            </h:outputLabel>
            <p class="form-control-static col-md-8"
              title="#{messages.credentialExpiresTip}">
              <h:outputText value="#{importCredentialBean.preparation.details.notAfter}"/>
            </p>
          </div>
	  		  <div class="form-group">
	  		    <h:outputLabel styleClass="col-md-4 control-label" 
	  		      for="name">#{messages.credentialNameLabel}</h:outputLabel>
	  		    <div class="col-md-8">
	            <h:inputText required="true" 
	              requiredMessage="#{messages.credentialNameRequired}" 
	              styleClass="form-control" id="name" 
	              title="#{messages.credentialNameTip}" 
	              value="#{importCredentialBean.name}"/>
	          </div>
	  		  </div>
          <div class="form-group has-feedback">
            <h:outputLabel for="owner" styleClass="col-md-4 control-label">
                #{messages.credentialOwnerLabel}</h:outputLabel>
            <div class="col-md-8" 
              data-autocomplete-url="#{request.contextPath}/api/groupMemberships">
              <h:inputText id="owner" 
                required="true" 
                requiredMessage="#{messages.credentialOwnerRequired}" 
                styleClass="form-control typeahead"
                title="#{messages.credentialOwnerTip}" 
                value="#{importCredentialBean.owner}"             
                valueChangeListener="#{importCredentialBean.ownerChanged}">
                <f:validator validatorId="org.soulwing.credo.validators.GroupNameAllowingSelf"/>
              </h:inputText>
              <span class="form-control-feedback"></span>              
              <h:message styleClass="help-block hidden" id="ownerErrors" for="owner"/>
              <span id="help-will-create" class="help-block hidden">New group will be created.</span>              
              <span id="help-inaccessible" class="help-block hidden">You are not a member of this group.</span>              
              <h:inputHidden id="ownerStatus" 
                value="#{importCredentialBean.ownerStatus}"/>
            </div>
          </div>
          <div class="form-group">
            <h:outputLabel styleClass="col-md-4 control-label" 
              for="note">#{messages.credentialNoteLabel}</h:outputLabel>
            <div class="col-md-8">
              <h:inputTextarea rows="4"
                styleClass="form-control" id="note" 
                title="#{messages.credentialNoteTip}" 
                value="#{importCredentialBean.note}"/>
            </div>
          </div>
          <div class="form-group">
            <h:outputLabel styleClass="col-md-4 control-label" 
              for="tags">#{messages.credentialTagsLabel}</h:outputLabel>
            <div class="col-md-8">
              <h:inputText
                styleClass="form-control selectize-control" id="tags" 
                title="#{messages.credentialTagsTip}" 
                value="#{importCredentialBean.tags}"/>
            </div>
          </div>
	  		  <div class="form-group">
	          <div class="col-md-8 col-md-push-4">      
              <h:commandLink styleClass="btn btn-default" 
                value="#{messages.cancelLabel}" 
                action="#{importCredentialBean.cancel}" 
                immediate="true"/>
              &nbsp;
	            <h:commandButton styleClass="btn btn-primary" 
	              value="#{messages.continueLabel} &#8594;" 
	              action="password" />
	          </div>
	        </div>	  		  
	  		</h:form>
      </div>
		</ui:define>
		<ui:define name="scripts">
		  <h:outputScript library="js" name="typeahead.bundle.js"/>
      <h:outputScript library="js" name="selectize.js"/>
      <h:outputScript library="js" name="credentials/import/details.js"/>     
		</ui:define>
	</ui:composition>
</h:body>

</html>